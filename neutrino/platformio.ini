
[platformio]
default_envs = native
src_dir = .

[env]
lib_ldf_mode = deep+
lib_compat_mode = off
build_flags =
  -DNEU_VERSION=\"0.1.0\"
  -DKONSOLE_FW_NAME=\"neutrino\"
  -DKONSOLE_FW_VERSION=\"0.1.0\"

[env:native]
platform = native
build_flags =
  ${env.build_flags}
  -DVARIANT_NATIVE
  -Ivariant/native
build_src_filter =
  +<src/**>
  +<arch/native/posix/**>

[env:esp32-vanilla]
platform = espressif32
board     = esp32dev
framework = arduino
monitor_speed = 115200
build_flags =
  ${env.build_flags}
  -DARCH_ESP32
  -DPORT_ARDUINO
  -DVARIANT_ESP32DEV
  -Ivariant/esp32dev
build_src_filter =
  +<src/**>
  -<src/main.c>
  +<arch/esp32/arduino/**>

; Uncomment to include RadioLib demo on ESP32 and set your pins
;[env:esp32-ssd1306-lora]
;platform = espressif32
;board     = esp32dev
;framework = arduino
;monitor_speed = 115200
;build_flags =
;  ${env.build_flags}
;  -DARCH_ESP32 -DPORT_ARDUINO -DVARIANT_ESP32DEV -Ivariant/esp32dev
;  -DNEU_USE_SGFX
;  -DSGFX_BUS_I2C=1 -DSGFX_DRV_SSD1306=1 -DSGFX_W=128 -DSGFX_H=64 -DSGFX_ROT=0 -DSGFX_PIN_SDA=21 -DSGFX_PIN_SCL=22
;  -DNEU_USE_RADIOLIB
;  -DRADIOLIB_SX127X_CS=5 -DRADIOLIB_SX127X_DIO0=26 -DRADIOLIB_SX127X_RST=14 -DRADIOLIB_SX127X_DIO1=-1 -DRADIOLIB_SX127X_BUSY=-1
;build_src_filter =
;  +<src/**>
;  -<src/main.c>
;  +<arch/esp32/arduino/**>


; ===================== ESP32-S3 Targets =====================

; LilyGO T-Dongle S3 (ST7789 240x135 over SPI)
[env:esp32s3-tdongle]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino
monitor_speed = 115200
build_flags =
  ${env.build_flags}
  -DARCH_ESP32 -DPORT_ARDUINO
  -DVARIANT_TDONGLE_S3
  -Ivariant/lilygo-tdongle-s3
  -DNEU_USE_SGFX
  -DSGFX_BUS_SPI=1
  -DSGFX_DRV_ST7735=1
  -DSGFX_W=160
  -DSGFX_H=80
  -DSGFX_ROT=1
  -DSGFX_PIN_SCK=5
  -DSGFX_PIN_MOSI=3
  -DSGFX_PIN_MISO=-1
  -DSGFX_PIN_CS=4
  -DSGFX_PIN_DC=2
  -DSGFX_PIN_RST=1
  -DSGFX_PIN_BL=37
  -DSGFX_SPI_HZ=40000000
  -DSGFX_HAL_ARDUINO_GENERIC=1
  -DSGFX_SCRATCH_BYTES=4096
  -DSGFX_ST7735_COLSTART=26
  -DSGFX_ST7735_ROWSTART=1
  -DSGFX_ST77XX_BGR=1
  -DSGFX_ST77XX_INVERT=1
build_src_filter =
  +<src/**>
  -<src/main.c>
  +<arch/esp32/arduino/**>

; LilyGO T-Pager (often 128x64 OLED on I2C)
[env:esp32s3-tpager]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino
monitor_speed = 115200
build_flags =
  ${env.build_flags}
  -DARCH_ESP32 -DPORT_ARDUINO
  -DVARIANT_TPAGER
  -Ivariant/lilygo-tpager
  -DNEU_USE_SGFX
  -DSGFX_BUS_SPI=1
  -DSGFX_DRV_ST7796=1
  -DSGFX_W=480
  -DSGFX_H=222
  -DSGFX_ROT=1
  -DSGFX_PIN_SCK=36
  -DSGFX_PIN_MOSI=35
  -DSGFX_PIN_MISO=-1
  -DSGFX_PIN_CS=34
  -DSGFX_PIN_DC=37
  -DSGFX_PIN_RST=33
  -DSGFX_PIN_BL=38
  -DSGFX_SPI_HZ=40000000
  -DSGFX_HAL_ARDUINO_GENERIC=1
  -DSGFX_SCRATCH_BYTES=8192
  -DSGFX_ST7796_BGR=1
  -DSGFX_ST7796_INVERT=0
  -DSGFX_ST7796_COLSTART=0
  -DSGFX_ST7796_ROWSTART=0
build_src_filter =
  +<src/**>
  -<src/main.c>
  +<arch/esp32/arduino/**>

; M5Stack Cardputer (ST7789 240x135 SPI)
[env:m5-cardputer]
platform = espressif32
board = m5stack-stamps3
framework = arduino
monitor_speed = 115200
build_flags =
  ${env.build_flags}
  -DARCH_ESP32 -DPORT_ARDUINO
  -DVARIANT_M5_CARDPUTER
  -Ivariant/m5-cardputer
  -DNEU_USE_SGFX
  -DSGFX_BUS_SPI=1
  -DSGFX_DRV_ST7789=1
  -DSGFX_PIN_SCK=36
  -DSGFX_PIN_MOSI=35
  -DSGFX_PIN_MISO=-1
  -DSGFX_PIN_CS=37
  -DSGFX_PIN_DC=34
  -DSGFX_PIN_RST=33
  -DSGFX_PIN_BL=38
  -DSGFX_SPI_HZ=40000000
  -DSGFX_HAL_ARDUINO_GENERIC=1
  -DSGFX_SCRATCH_BYTES=4096
  -DSGFX_W=240
  -DSGFX_H=135
  -DSGFX_ROT=3
  -DSGFX_ST7789_COLSTART=53
  -DSGFX_ST7789_ROWSTART=40
build_src_filter =
  +<src/**>
  -<src/main.c>
  +<arch/esp32/arduino/**>

; HeltecV3
[env:esp32s3-heltecv3]
platform = espressif32
board = heltec_wifi_kit_32_V3
framework = arduino
monitor_speed = 115200
build_flags =
  ${env.build_flags}
  -DARCH_ESP32 -DPORT_ARDUINO
  -DVARIANT_TDONGLE_S3
  -Ivariant/lilygo-tdongle-s3
  -DNEU_USE_SGFX
  -DSGFX_BUS_I2C=1
  -DSGFX_DRV_SSD1306=1
  -DSGFX_W=128
  -DSGFX_H=64
  -DSGFX_ROT=0
  -DSGFX_PIN_SDA=17
  -DSGFX_PIN_SCL=18
  -DSGFX_PIN_RST=21
  -DSGFX_PIN_BL=-1
  -DSGFX_I2C_ADDR=0x3C
  -DSGFX_I2C_HZ=400000
  -DSGFX_HAL_ARDUINO_GENERIC=1
  -DSGFX_SCRATCH_BYTES=1024
build_src_filter =
  +<src/**>
  -<src/main.c>
  +<arch/esp32/arduino/**>
